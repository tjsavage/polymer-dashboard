<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="../bower_components/core-selector/core-selector.html">
<link rel="import" href="dashboard-module.html">
<link rel="import" href="dashboard-service.html">

<polymer-element name="dashboard-app" vertical layout>
    <template>
        <style>
            :host {
                background-color: #eee;
                font-family: RobotoDraft, 'Helvetica Neue', Helvetica, Arial;
            }

            core-toolbar {
                color: #f1f1f1;
                fill: #f1f1f1;
                background: #4285f4;
            }

            #container {
                overflow: auto;
            }

            .card {
                position: relative;
                height: 300px;
                width: 300px;
                font-size: 50px;
                margin: 8px;
                background-color: steelblue;
                border-radius: 4px;
                cursor: default;
            }

            .view {
                font-size: 250px;
                background-color: white;
            }

        </style>
        <dashboard-service id="service" issues="{{data.issues}}"></dashboard-service>
        <core-toolbar>
            <core-icon-button icon="arrow-back" on-tap="{{back}}" hidden?="{{ $.pages.selected === 0 }}"></core-icon-button>
            <span flex>Polymer Dashboard</span>
            <paper-icon-button icon="refresh" on-tap="{{refreshAll}}"></paper-icon-button>
        </core-toolbar>
        
        <core-animated-pages id="pages" flex selected="0" on-core-animated-pages-transition-end="{{transitionEnd}}" transitions="cross-fade-all hero-transition">
            <section vertical layout>
                <div id="container" flex horizontal wrap around-justified layout hero-p>
                    <div class="card" vertical center layout hero-id="card-github" hero?="{{$.pages.selected === 1 || lastSelected === 1}}" on-tap="{{openGithubIssues}}">
                        <span cross-fade>Github Issues</span>
                    </div>
                </div>
            </section>

            <section vertical layout>
                <div class="view" flex vertical center center-justified layout hero-id="card-github" hero?="{{$.pages.selected === 1 || $.pages.selected === 0}}">
                    <span cross-fade>Github Issues</span>
                </div>
            </section>
        </core-animated-pages>
    </template>
    <script>
        Polymer('dashboard-app', {
            created: function() {
                this.data = {
                    issues: {}
                }
            },
            ready: function() {

            },
            openGithubIssues: function(e) {
                this.$.pages.selected = 1;
            },
            transitionEnd: function() {
                if (this.lastSelected) {
                    this.lastSelected == null;
                }
            },
            back: function() {
                this.lastSelected = this.$.pages.selected;
                this.$.pages.selected = 0;
            },
            activeModuleChanged: function(oldVal, newVal) {
                console.log(oldVal, newVal);
            },
            refreshAll: function() {
                this.$.service.refreshAll();
            }

        });
    </script>
</polymer-element>